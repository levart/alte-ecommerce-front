"use strict";(self.webpackChunkecomemrce_front=self.webpackChunkecomemrce_front||[]).push([[104],{4104:(J,l,c)=>{c.r(l),c.d(l,{ProductsModule:()=>A});var u=c(6895),s=c(3128),t=c(8256),a=c(6420),h=c(6943),g=c(5631),n=c(433);const m=function(){return["/products"]},f=function(o){return{category:o}};function P(o,i){if(1&o&&(t.TgZ(0,"a",9),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("routerLink",t.DdM(3,m))("queryParams",t.VKq(4,f,e.id)),t.xp6(1),t.hij(" ",e.name," ")}}function v(o,i){1&o&&t._UZ(0,"app-product-card",10),2&o&&t.Q6J("product",i.$implicit)}function C(o,i){if(1&o&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.message," ")}}function Z(o,i){1&o&&t._UZ(0,"app-product-card",12),2&o&&t.Q6J("product",i.$implicit)}const T=[{path:"",component:(()=>{class o{constructor(e,r,d){this.productService=e,this.categoryService=r,this.route=d,this.products=[],this.categories$=this.categoryService.getAll()}ngOnInit(){this.route.queryParams.subscribe(e=>{this.categoryId=e.category,this.search=e.search,this.getProducts()})}getProducts(){this.productService.getProducts({categoryId:this.categoryId||null,search:this.search||null}).pipe().subscribe(r=>{this.products=r})}searchHandle(e){e.length>3?(this.search=e,this.getProducts()):(this.search=null,this.getProducts())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.su),t.Y36(h.H),t.Y36(s.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products"]],decls:12,vars:7,consts:[[1,"d-flex","gap-4"],[1,"sidebar"],[1,"list-group"],[1,"list-group-item","list-group-item-action",3,"routerLink"],["routerLinkActive","active","class","list-group-item list-group-item-action",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"flex-fill"],["type","search","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange"],[1,"product-items"],[3,"product",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"list-group-item","list-group-item-action",3,"routerLink","queryParams"],[3,"product"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),t._uU(4,"All"),t.qZA(),t.YNc(5,P,2,6,"a",4),t.ALo(6,"async"),t.qZA()(),t.TgZ(7,"div",5)(8,"div")(9,"input",6),t.NdJ("ngModelChange",function(p){return r.searchHandle(p)}),t.qZA()(),t.TgZ(10,"div",7),t.YNc(11,v,1,1,"app-product-card",8),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(6,m)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(6,4,r.categories$)),t.xp6(4),t.Q6J("ngModel",r.search),t.xp6(2),t.Q6J("ngForOf",r.products))},dependencies:[u.sg,s.yS,s.Od,g.Y,n.Fj,n.JJ,n.On,u.Ov],styles:[".sidebar[_ngcontent-%COMP%]{width:200px}.product-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-gap:20px;margin:20px 0}"]}),o})()},{path:":id",component:(()=>{class o{constructor(e,r,d){this.route=e,this.productService=r,this.cartService=d,this.quantity=1,this.similarProducts=[]}ngOnInit(){this.route.params.subscribe(e=>{this.productId=e.id,this.getProduct()})}getProduct(){this.productService.getOne(this.productId).pipe().subscribe(e=>{this.product=e,this.getProducts()})}addToCart(){this.cartService.addToCart({productId:this.productId,quantity:this.quantity}).pipe().subscribe(()=>{this.message="Added to cart",setTimeout(()=>{this.message=void 0},2e3)})}getProducts(){this.productService.getProducts({limit:4,categoryId:this.product.category.id,similar:this.product.id}).pipe().subscribe(e=>{this.similarProducts=e})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.gz),t.Y36(a.su),t.Y36(a.Ni))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-detail"]],decls:15,vars:6,consts:[[1,"d-flex","gap-4"],[1,"flex-initial"],["width","300px",3,"src"],[1,"flex-fill"],[3,"innerText"],["type","number",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[1,"mb-4"],["class","alert alert-success",4,"ngIf"],[1,"product-items"],[3,"product",4,"ngFor","ngForOf"],[1,"alert","alert-success"],[3,"product"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3)(4,"h1"),t._uU(5),t.qZA(),t._UZ(6,"div",4),t.TgZ(7,"div")(8,"input",5),t.NdJ("ngModelChange",function(p){return r.quantity=p}),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return r.addToCart()}),t._uU(10,"Add to cart"),t.qZA()(),t.TgZ(11,"div",7),t.YNc(12,C,2,1,"div",8),t.qZA()()(),t.TgZ(13,"div",9),t.YNc(14,Z,1,1,"app-product-card",10),t.qZA()),2&e&&(t.xp6(2),t.Q6J("src",r.product.image,t.LSH),t.xp6(3),t.Oqu(r.product.name),t.xp6(1),t.Q6J("innerText",r.product.description),t.xp6(2),t.Q6J("ngModel",r.quantity),t.xp6(4),t.Q6J("ngIf",r.message),t.xp6(2),t.Q6J("ngForOf",r.similarProducts))},dependencies:[u.sg,u.O5,g.Y,n.Fj,n.wV,n.JJ,n.On],styles:[".product-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,minmax(300px,1fr));grid-gap:20px;margin:20px 0}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[s.Bz.forChild(T),s.Bz]}),o})();var x=c(7938);let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,M,x.$,n.u5]}),o})()}}]);